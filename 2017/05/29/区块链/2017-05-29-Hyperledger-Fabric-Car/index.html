<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="详解区块链Hyperledger Fabric资产（车辆）交易, 人工智能,大数据,云计算,区块链">
    <meta name="description" content="详解区块链Hyperledger Fabric资产（车辆）交易首先定义Chaincode 链码及API， 通过定义相应的数据结构和方法就完成了一个智能契约，参考原文如下：

Chaincode is a program, written i">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>详解区块链Hyperledger Fabric资产（车辆）交易 | Innovation</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    
    <script src="/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Innovation</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Innovation</div>
        <div class="logo-desc">
            
            艰苦奋斗、奋发进取，从绝望中寻找希望，人生终将辉煌。
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://hyperledger-fabric.readthedocs.io/en/latest/_images/hyperledger_fabric_logo_color.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">详解区块链Hyperledger Fabric资产（车辆）交易</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Hyperledger/">
                                <span class="chip bg-color">Hyperledger</span>
                            </a>
                        
                            <a href="/tags/Blockchain/">
                                <span class="chip bg-color">Blockchain</span>
                            </a>
                        
                            <a href="/tags/Supplychain/">
                                <span class="chip bg-color">Supplychain</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" class="post-category">
                                区块链
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2017-05-29
                </div>
                

                

                

                

                
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="详解区块链Hyperledger-Fabric资产（车辆）交易"><a href="#详解区块链Hyperledger-Fabric资产（车辆）交易" class="headerlink" title="详解区块链Hyperledger Fabric资产（车辆）交易"></a>详解区块链Hyperledger Fabric资产（车辆）交易</h2><p>首先定义Chaincode 链码及API， 通过定义相应的数据结构和方法就完成了一个智能契约，参考原文如下：</p>
<blockquote>
<p>Chaincode is a program, written in Go, and eventually in other programming languages such as Java, that implements a prescribed interface. Chaincode runs in a secured Docker container isolated from the endorsing peer process. Chaincode initializes and manages ledger state through transactions submitted by applications. A chaincode typically handles business logic agreed to by members of the network, so it may be considered as a “smart contract”. State created by a chaincode is scoped exclusively to that chaincode and can’t be accessed directly by another chaincode. However, within the same network, given the appropriate permission a chaincode may invoke another chaincode to access its state.</p>
</blockquote>
<p>下面fabcar这个chaincode里car有四属性</p>
<ul>
<li>Make   string <code>json:&quot;make&quot;</code></li>
<li>Model  string <code>json:&quot;model&quot;</code></li>
<li>Colour string <code>json:&quot;colour&quot;</code></li>
<li>Owner  string <code>json:&quot;owner&quot;</code></li>
</ul>
<p>以及各类交易方法:</p>
<ol>
<li>createCar   创建车</li>
<li>queryAllCars 查询所有车</li>
<li>changeCarOwner  改变车主</li>
</ol>
<p>chaincode具体代码如下：</p>
<pre><code class="go">/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

/*
 * The sample smart contract for documentation topic:
 * Writing Your First Blockchain Application
 */

package main

/* Imports
 * 4 utility libraries for formatting, handling bytes, reading and writing JSON, and string manipulation
 * 2 specific Hyperledger Fabric specific libraries for Smart Contracts
 */
import (
    &quot;bytes&quot;
    &quot;encoding/json&quot;
    &quot;fmt&quot;
    &quot;strconv&quot;

    &quot;github.com/hyperledger/fabric/core/chaincode/shim&quot;
    sc &quot;github.com/hyperledger/fabric/protos/peer&quot;
)

// Define the Smart Contract structure
type SmartContract struct {
}

// Define the car structure, with 4 properties.  Structure tags are used by encoding/json library 建立数据结构
type Car struct {
    Make   string `json:&quot;make&quot;`
    Model  string `json:&quot;model&quot;`
    Colour string `json:&quot;colour&quot;`
    Owner  string `json:&quot;owner&quot;`
}

/*
 * The Init method is called when the Smart Contract &quot;fabcar&quot; is instantiated by the blockchain network
 * Best practice is to have any Ledger initialization in separate function -- see initLedger()
 */
func (s *SmartContract) Init(APIstub shim.ChaincodeStubInterface) sc.Response {
    return shim.Success(nil)
}

/*
 * The Invoke method is called as a result of an application request to run the Smart Contract &quot;fabcar&quot;
 * The calling application program has also specified the particular smart contract function to be called, with arguments
 */
func (s *SmartContract) Invoke(APIstub shim.ChaincodeStubInterface) sc.Response {

    // Retrieve the requested Smart Contract function and arguments
    function, args := APIstub.GetFunctionAndParameters()
    // Route to the appropriate handler function to interact with the ledger appropriately
    if function == &quot;queryCar&quot; {
        return s.queryCar(APIstub, args)
    } else if function == &quot;initLedger&quot; {
        return s.initLedger(APIstub)
    } else if function == &quot;createCar&quot; {
        return s.createCar(APIstub, args)
    } else if function == &quot;queryAllCars&quot; {
        return s.queryAllCars(APIstub)
    } else if function == &quot;changeCarOwner&quot; {
        return s.changeCarOwner(APIstub, args)
    }

    return shim.Error(&quot;Invalid Smart Contract function name.&quot;)
}

func (s *SmartContract) queryCar(APIstub shim.ChaincodeStubInterface, args []string) sc.Response {

    if len(args) != 1 {
        return shim.Error(&quot;Incorrect number of arguments. Expecting 1&quot;)
    }

    carAsBytes, _ := APIstub.GetState(args[0])
    return shim.Success(carAsBytes)
}
// 初始化账簿10辆车
func (s *SmartContract) initLedger(APIstub shim.ChaincodeStubInterface) sc.Response {
    cars := []Car{
        Car{Make: &quot;Toyota&quot;, Model: &quot;Prius&quot;, Colour: &quot;blue&quot;, Owner: &quot;Tomoko&quot;},
        Car{Make: &quot;Ford&quot;, Model: &quot;Mustang&quot;, Colour: &quot;red&quot;, Owner: &quot;Brad&quot;},
        Car{Make: &quot;Hyundai&quot;, Model: &quot;Tucson&quot;, Colour: &quot;green&quot;, Owner: &quot;Jin Soo&quot;},
        Car{Make: &quot;Volkswagen&quot;, Model: &quot;Passat&quot;, Colour: &quot;yellow&quot;, Owner: &quot;Max&quot;},
        Car{Make: &quot;Tesla&quot;, Model: &quot;S&quot;, Colour: &quot;black&quot;, Owner: &quot;Adriana&quot;},
        Car{Make: &quot;Peugeot&quot;, Model: &quot;205&quot;, Colour: &quot;purple&quot;, Owner: &quot;Michel&quot;},
        Car{Make: &quot;Chery&quot;, Model: &quot;S22L&quot;, Colour: &quot;white&quot;, Owner: &quot;Aarav&quot;},
        Car{Make: &quot;Fiat&quot;, Model: &quot;Punto&quot;, Colour: &quot;violet&quot;, Owner: &quot;Pari&quot;},
        Car{Make: &quot;Tata&quot;, Model: &quot;Nano&quot;, Colour: &quot;indigo&quot;, Owner: &quot;Valeria&quot;},
        Car{Make: &quot;Holden&quot;, Model: &quot;Barina&quot;, Colour: &quot;brown&quot;, Owner: &quot;Shotaro&quot;},
    }

    i := 0
    for i &lt; len(cars) {
        fmt.Println(&quot;i is &quot;, i)
        carAsBytes, _ := json.Marshal(cars[i])
        APIstub.PutState(&quot;CAR&quot;+strconv.Itoa(i), carAsBytes)
        fmt.Println(&quot;Added&quot;, cars[i])
        i = i + 1
    }

    return shim.Success(nil)
}

func (s *SmartContract) createCar(APIstub shim.ChaincodeStubInterface, args []string) sc.Response {

    if len(args) != 5 {
        return shim.Error(&quot;Incorrect number of arguments. Expecting 5&quot;)
    }

    var car = Car{Make: args[1], Model: args[2], Colour: args[3], Owner: args[4]}

    carAsBytes, _ := json.Marshal(car)
    APIstub.PutState(args[0], carAsBytes)

    return shim.Success(nil)
}

func (s *SmartContract) queryAllCars(APIstub shim.ChaincodeStubInterface) sc.Response {

    startKey := &quot;CAR0&quot;
    endKey := &quot;CAR999&quot;

    resultsIterator, err := APIstub.GetStateByRange(startKey, endKey)
    if err != nil {
        return shim.Error(err.Error())
    }
    defer resultsIterator.Close()

    // buffer is a JSON array containing QueryResults
    var buffer bytes.Buffer
    buffer.WriteString(&quot;[&quot;)

    bArrayMemberAlreadyWritten := false
    for resultsIterator.HasNext() {
        queryResponse, err := resultsIterator.Next()
        if err != nil {
            return shim.Error(err.Error())
        }
        // Add a comma before array members, suppress it for the first array member
        if bArrayMemberAlreadyWritten == true {
            buffer.WriteString(&quot;,&quot;)
        }
        buffer.WriteString(&quot;{\&quot;Key\&quot;:&quot;)
        buffer.WriteString(&quot;\&quot;&quot;)
        buffer.WriteString(queryResponse.Key)
        buffer.WriteString(&quot;\&quot;&quot;)

        buffer.WriteString(&quot;, \&quot;Record\&quot;:&quot;)
        // Record is a JSON object, so we write as-is
        buffer.WriteString(string(queryResponse.Value))
        buffer.WriteString(&quot;}&quot;)
        bArrayMemberAlreadyWritten = true
    }
    buffer.WriteString(&quot;]&quot;)

    fmt.Printf(&quot;- queryAllCars:\n%s\n&quot;, buffer.String())

    return shim.Success(buffer.Bytes())
}

func (s *SmartContract) changeCarOwner(APIstub shim.ChaincodeStubInterface, args []string) sc.Response {

    if len(args) != 2 {
        return shim.Error(&quot;Incorrect number of arguments. Expecting 2&quot;)
    }

    carAsBytes, _ := APIstub.GetState(args[0])
    car := Car{}

    json.Unmarshal(carAsBytes, &amp;car)
    car.Owner = args[1]

    carAsBytes, _ = json.Marshal(car)
    APIstub.PutState(args[0], carAsBytes)

    return shim.Success(nil)
}

// The main function is only relevant in unit test mode. Only included here for completeness.
func main() {

    // Create a new Smart Contract
    err := shim.Start(new(SmartContract))
    if err != nil {
        fmt.Printf(&quot;Error creating new Smart Contract: %s&quot;, err)
    }
}</code></pre>
<h3 id="构建区块链网络"><a href="#构建区块链网络" class="headerlink" title="构建区块链网络"></a>构建区块链网络</h3><p>启动脚本：startFabric.sh</p>
<pre><code>#!/bin/bash
# Exit on first error
set -e

starttime=$(date +%s)

if [ ! -d ~/.hfc-key-store/ ]; then
    mkdir ~/.hfc-key-store/
fi
cp $PWD/creds/* ~/.hfc-key-store/
# launch network; create channel and join peer to channel  
# 启动区域连网络，并把各peer 加入Chanel
cd ../basic-network
./start.sh

# Now launch the CLI container in order to install, instantiate chaincode 
# 启动Cli容器并安装，初始化链码
# and prime the ledger with our 10 cars
# 然后初始化10辆车
docker-compose -f ./docker-compose.yml up -d cli

docker exec -e &quot;CORE_PEER_LOCALMSPID=Org1MSP&quot; -e &quot;CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp&quot; cli peer chaincode install -n fabcar -v 1.0 -p github.com/fabcar
docker exec -e &quot;CORE_PEER_LOCALMSPID=Org1MSP&quot; -e &quot;CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp&quot; cli peer chaincode instantiate -o orderer.example.com:7050 -C mychannel -n fabcar -v 1.0 -c &#39;{&quot;Args&quot;:[&quot;&quot;]}&#39; -P &quot;OR (&#39;Org1MSP.member&#39;,&#39;Org2MSP.member&#39;)&quot;
sleep 10
docker exec -e &quot;CORE_PEER_LOCALMSPID=Org1MSP&quot; -e &quot;CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp&quot; cli peer chaincode invoke -o orderer.example.com:7050 -C mychannel -n fabcar -c &#39;{&quot;function&quot;:&quot;initLedger&quot;,&quot;Args&quot;:[&quot;&quot;]}&#39;

printf &quot;\nTotal execution time : $(($(date +%s) - starttime)) secs ...\n\n&quot;</code></pre><p>执行脚本</p>
<pre><code class="shell">root@ubuntu:~/fabcar# . ./startFabric.sh

docker-compose -f docker-compose.yml down
Removing network net_basic

docker-compose -f docker-compose.yml up -d ca.example.com orderer.example.com peer0.org1.example.com couchdb
Creating network &quot;net_basic&quot; with the default driver
Creating couchdb ... 
Creating ca.example.com ... 
Creating orderer.example.com ... 
Creating ca.example.com
Creating couchdb
Creating orderer.example.com ... done
Creating peer0.org1.example.com ... 
Creating peer0.org1.example.com ... done

# wait for Hyperledger Fabric to start
# incase of errors when running later commands, issue export FABRIC_START_TIMEOUT=&lt;larger number&gt;
export FABRIC_START_TIMEOUT=10
#echo ${FABRIC_START_TIMEOUT}
sleep ${FABRIC_START_TIMEOUT}

# Create the channel
docker exec -e &quot;CORE_PEER_LOCALMSPID=Org1MSP&quot; -e &quot;CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com/msp&quot; peer0.org1.example.com peer channel create -o orderer.example.com:7050 -c mychannel -f /etc/hyperledger/configtx/channel.tx
2017-08-29 19:12:19.929 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP
2017-08-29 19:12:19.929 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity
2017-08-29 19:12:19.933 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2017-08-29 19:12:19.933 UTC [msp] GetLocalMSP -&gt; DEBU 004 Returning existing local MSP
2017-08-29 19:12:19.933 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 005 Obtaining default signing identity
2017-08-29 19:12:19.935 UTC [msp] GetLocalMSP -&gt; DEBU 006 Returning existing local MSP
2017-08-29 19:12:19.935 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 007 Obtaining default signing identity
2017-08-29 19:12:19.935 UTC [msp/identity] Sign -&gt; DEBU 008 Sign: plaintext: 0A8C060A074F7267314D53501280062D...53616D706C65436F6E736F727469756D 
2017-08-29 19:12:19.935 UTC [msp/identity] Sign -&gt; DEBU 009 Sign: digest: AB4CF53AE7F25F55FC853E7AA8FA847F9ADB7F5669C251C029313639CBE3EB0C 
2017-08-29 19:12:19.935 UTC [msp] GetLocalMSP -&gt; DEBU 00a Returning existing local MSP
2017-08-29 19:12:19.935 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 00b Obtaining default signing identity
2017-08-29 19:12:19.936 UTC [msp] GetLocalMSP -&gt; DEBU 00c Returning existing local MSP
2017-08-29 19:12:19.936 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 00d Obtaining default signing identity
2017-08-29 19:12:19.936 UTC [msp/identity] Sign -&gt; DEBU 00e Sign: plaintext: 0AC3060A1508021A060893F996CD0522...04CD8921E4BA83A1D6A2088DF251B740 
2017-08-29 19:12:19.936 UTC [msp/identity] Sign -&gt; DEBU 00f Sign: digest: BF6CC7A8635CE11B92CE895142A4377D9A70CB14EA9ACBF53CD39E5E1E010F06 
2017-08-29 19:12:20.084 UTC [msp] GetLocalMSP -&gt; DEBU 010 Returning existing local MSP
2017-08-29 19:12:20.084 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 011 Obtaining default signing identity
2017-08-29 19:12:20.084 UTC [msp] GetLocalMSP -&gt; DEBU 012 Returning existing local MSP
2017-08-29 19:12:20.084 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 013 Obtaining default signing identity
2017-08-29 19:12:20.084 UTC [msp/identity] Sign -&gt; DEBU 014 Sign: plaintext: 0AC3060A1508021A060894F996CD0522...9BCAC7F7286212080A021A0012021A00 
2017-08-29 19:12:20.084 UTC [msp/identity] Sign -&gt; DEBU 015 Sign: digest: 3FD3A5C2FA53214CEFC3B47DFC4DEE78DF2BBC1646C77C2CA3039A7E83378931 
2017-08-29 19:12:20.086 UTC [channelCmd] readBlock -&gt; DEBU 016 Got status:*orderer.DeliverResponse_Status 
2017-08-29 19:12:20.086 UTC [msp] GetLocalMSP -&gt; DEBU 017 Returning existing local MSP
2017-08-29 19:12:20.086 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 018 Obtaining default signing identity
2017-08-29 19:12:20.090 UTC [channelCmd] InitCmdFactory -&gt; INFO 019 Endorser and orderer connections initialized
2017-08-29 19:12:20.290 UTC [msp] GetLocalMSP -&gt; DEBU 01a Returning existing local MSP
2017-08-29 19:12:20.290 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 01b Obtaining default signing identity
2017-08-29 19:12:20.290 UTC [msp] GetLocalMSP -&gt; DEBU 01c Returning existing local MSP
2017-08-29 19:12:20.290 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 01d Obtaining default signing identity
2017-08-29 19:12:20.290 UTC [msp/identity] Sign -&gt; DEBU 01e Sign: plaintext: 0AC3060A1508021A060894F996CD0522...AA1D768A0B9D12080A021A0012021A00 
2017-08-29 19:12:20.290 UTC [msp/identity] Sign -&gt; DEBU 01f Sign: digest: 560CFC8CB4E9D591BE81CBD50A50107BE8B074021595CBB1F9DFD8EC5A78C857 
2017-08-29 19:12:20.297 UTC [channelCmd] readBlock -&gt; DEBU 020 Received block:0 
2017-08-29 19:12:20.299 UTC [main] main -&gt; INFO 021 Exiting.....
# Join peer0.org1.example.com to the channel.
docker exec -e &quot;CORE_PEER_LOCALMSPID=Org1MSP&quot; -e &quot;CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com/msp&quot; peer0.org1.example.com peer channel join -b mychannel.block
2017-08-29 19:12:20.602 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP
2017-08-29 19:12:20.602 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity
2017-08-29 19:12:20.607 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized
2017-08-29 19:12:20.610 UTC [msp/identity] Sign -&gt; DEBU 004 Sign: plaintext: 0A8A070A5C08011A0C0894F996CD0510...9BD6C0AB03541A080A000A000A000A00 
2017-08-29 19:12:20.610 UTC [msp/identity] Sign -&gt; DEBU 005 Sign: digest: F428B9E87CAC4F0EC5EB57736BDCCBAE1E1972C69B77467D2EE41B783867FCA3 
2017-08-29 19:12:20.813 UTC [channelCmd] executeJoin -&gt; INFO 006 Peer joined the channel!
2017-08-29 19:12:20.813 UTC [main] main -&gt; INFO 007 Exiting.....
Pulling cli (hyperledger/fabric-tools:x86_64-1.0.0)...
x86_64-1.0.0: Pulling from hyperledger/fabric-tools
aafe6b5e13de: Already exists
0a2b43a72660: Already exists
18bdd1e546d2: Already exists
8198342c3e05: Already exists
f56970a44fd4: Already exists
e32b597e7839: Already exists
a6e362fc71c4: Already exists
e21570e54f61: Already exists
66620db3cda6: Already exists
0548c619fbb7: Already exists
e084aff94b0b: Already exists
fac34f94b9b9: Pull complete
d4ca6b61a36e: Pull complete
6378740a852a: Pull complete
75a35cd33119: Pull complete
Digest: sha256:c107430c14344f4f37f0882f3eb8591520abd699a0b9da2b507f7527505612a7
Status: Downloaded newer image for hyperledger/fabric-tools:x86_64-1.0.0
Creating cli ... 
Creating cli ... done
2017-08-29 19:12:38.644 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP
2017-08-29 19:12:38.645 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity
2017-08-29 19:12:38.645 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2017-08-29 19:12:38.645 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2017-08-29 19:12:39.397 UTC [golang-platform] getCodeFromFS -&gt; DEBU 005 getCodeFromFS github.com/fabcar
2017-08-29 19:12:40.404 UTC [golang-platform] func1 -&gt; DEBU 006 Discarding GOROOT package bytes
2017-08-29 19:12:40.404 UTC [golang-platform] func1 -&gt; DEBU 007 Discarding GOROOT package encoding/json
2017-08-29 19:12:40.404 UTC [golang-platform] func1 -&gt; DEBU 008 Discarding GOROOT package fmt
2017-08-29 19:12:40.404 UTC [golang-platform] func1 -&gt; DEBU 009 Discarding provided package github.com/hyperledger/fabric/core/chaincode/shim
2017-08-29 19:12:40.404 UTC [golang-platform] func1 -&gt; DEBU 00a Discarding provided package github.com/hyperledger/fabric/protos/peer
2017-08-29 19:12:40.404 UTC [golang-platform] func1 -&gt; DEBU 00b Discarding GOROOT package strconv
2017-08-29 19:12:40.405 UTC [golang-platform] GetDeploymentPayload -&gt; DEBU 00c done
2017-08-29 19:12:40.412 UTC [msp/identity] Sign -&gt; DEBU 00d Sign: plaintext: 0A8A070A5C08031A0C08A8F996CD0510...939FFF060000FFFF9C08DC0700200000 
2017-08-29 19:12:40.412 UTC [msp/identity] Sign -&gt; DEBU 00e Sign: digest: 46FFD3912E51469B57E87B5832DF2FC27CCABA13316494E0418B2B600C2233DA 
2017-08-29 19:12:40.419 UTC [chaincodeCmd] install -&gt; DEBU 00f Installed remotely response:&lt;status:200 payload:&quot;OK&quot; &gt; 
2017-08-29 19:12:40.419 UTC [main] main -&gt; INFO 010 Exiting.....
2017-08-29 19:12:40.631 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP
2017-08-29 19:12:40.631 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity
2017-08-29 19:12:40.632 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2017-08-29 19:12:40.632 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2017-08-29 19:12:40.634 UTC [msp/identity] Sign -&gt; DEBU 005 Sign: plaintext: 0A95070A6708031A0C08A8F996CD0510...324D53500A04657363630A0476736363 
2017-08-29 19:12:40.634 UTC [msp/identity] Sign -&gt; DEBU 006 Sign: digest: 85C3D93AD44FDAAF2A1A92BC1FC4DAEFD2E1F796880B36A86673E4E3CE266EBD 
2017-08-29 19:13:53.027 UTC [msp/identity] Sign -&gt; DEBU 007 Sign: plaintext: 0A95070A6708031A0C08A8F996CD0510...57E2BBF703C567C9EC8E912FECD8AE3D 
2017-08-29 19:13:53.027 UTC [msp/identity] Sign -&gt; DEBU 008 Sign: digest: 7132F6CEBF94F7C478AC63DFE841FDBEE31EC4C78B67283AB373A2D811A5BEE1 
2017-08-29 19:13:53.032 UTC [main] main -&gt; INFO 009 Exiting.....
2017-08-29 19:14:03.355 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP
2017-08-29 19:14:03.355 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity
2017-08-29 19:14:03.358 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2017-08-29 19:14:03.358 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2017-08-29 19:14:03.360 UTC [msp/identity] Sign -&gt; DEBU 005 Sign: plaintext: 0A97070A6908031A0C08FBF996CD0510...1A0E0A0A696E69744C65646765720A00 
2017-08-29 19:14:03.360 UTC [msp/identity] Sign -&gt; DEBU 006 Sign: digest: EBA72A2A263CFB4245DB7C51BCD134E981CB0229F5022E8C485FBDAF7B3B703B 
2017-08-29 19:14:03.412 UTC [msp/identity] Sign -&gt; DEBU 007 Sign: plaintext: 0A97070A6908031A0C08FBF996CD0510...D9166A19C3A967F8BEE99CABD206C9D6 
2017-08-29 19:14:03.412 UTC [msp/identity] Sign -&gt; DEBU 008 Sign: digest: D5386F73796B0FCE332877D1ACF454DDE073899A609867B68B35F459382A2F66 
2017-08-29 19:14:03.418 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; DEBU 009 ESCC invoke result: version:1 response:&lt;status:200 message:&quot;OK&quot; &gt; payload:&quot;\n \301G\277h\207t\276[\r\314\30631um\345J[#\356%0\010\320\317\n\016y\255\356\322\322\022\267\006\n\240\006\022\205\006\n\006fabcar\022\372\005\032J\n\004CAR0\032B{\&quot;make\&quot;:\&quot;Toyota\&quot;,\&quot;model\&quot;:\&quot;Prius\&quot;,\&quot;colour\&quot;:\&quot;blue\&quot;,\&quot;owner\&quot;:\&quot;Tomoko\&quot;}\032G\n\004CAR1\032?{\&quot;make\&quot;:\&quot;Ford\&quot;,\&quot;model\&quot;:\&quot;Mustang\&quot;,\&quot;colour\&quot;:\&quot;red\&quot;,\&quot;owner\&quot;:\&quot;Brad\&quot;}\032N\n\004CAR2\032F{\&quot;make\&quot;:\&quot;Hyundai\&quot;,\&quot;model\&quot;:\&quot;Tucson\&quot;,\&quot;colour\&quot;:\&quot;green\&quot;,\&quot;owner\&quot;:\&quot;Jin Soo\&quot;}\032N\n\004CAR3\032F{\&quot;make\&quot;:\&quot;Volkswagen\&quot;,\&quot;model\&quot;:\&quot;Passat\&quot;,\&quot;colour\&quot;:\&quot;yellow\&quot;,\&quot;owner\&quot;:\&quot;Max\&quot;}\032G\n\004CAR4\032?{\&quot;make\&quot;:\&quot;Tesla\&quot;,\&quot;model\&quot;:\&quot;S\&quot;,\&quot;colour\&quot;:\&quot;black\&quot;,\&quot;owner\&quot;:\&quot;Adriana\&quot;}\032K\n\004CAR5\032C{\&quot;make\&quot;:\&quot;Peugeot\&quot;,\&quot;model\&quot;:\&quot;205\&quot;,\&quot;colour\&quot;:\&quot;purple\&quot;,\&quot;owner\&quot;:\&quot;Michel\&quot;}\032H\n\004CAR6\032@{\&quot;make\&quot;:\&quot;Chery\&quot;,\&quot;model\&quot;:\&quot;S22L\&quot;,\&quot;colour\&quot;:\&quot;white\&quot;,\&quot;owner\&quot;:\&quot;Aarav\&quot;}\032H\n\004CAR7\032@{\&quot;make\&quot;:\&quot;Fiat\&quot;,\&quot;model\&quot;:\&quot;Punto\&quot;,\&quot;colour\&quot;:\&quot;violet\&quot;,\&quot;owner\&quot;:\&quot;Pari\&quot;}\032J\n\004CAR8\032B{\&quot;make\&quot;:\&quot;Tata\&quot;,\&quot;model\&quot;:\&quot;Nano\&quot;,\&quot;colour\&quot;:\&quot;indigo\&quot;,\&quot;owner\&quot;:\&quot;Valeria\&quot;}\032M\n\004CAR9\032E{\&quot;make\&quot;:\&quot;Holden\&quot;,\&quot;model\&quot;:\&quot;Barina\&quot;,\&quot;colour\&quot;:\&quot;brown\&quot;,\&quot;owner\&quot;:\&quot;Shotaro\&quot;}\022\026\n\004lscc\022\016\n\014\n\006fabcar\022\002\010\001\032\003\010\310\001\&quot;\r\022\006fabcar\032\0031.0&quot; endorsement:&lt;endorser:&quot;\n\007Org1MSP\022\374\005-----BEGIN -----\nMIICGDCCAb+gAwIBAgIQPcMFFEB/vq6mEL6vXV7aUTAKBggqhkjOPQQDAjBzMQsw\nCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy\nYW5jaXNjbzEZMBcGA1UEChMQb3JnMS5leGFtcGxlLmNvbTEcMBoGA1UEAxMTY2Eu\nb3JnMS5leGFtcGxlLmNvbTAeFw0xNzA2MjMxMjMzMTlaFw0yNzA2MjExMjMzMTla\nMFsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1T\nYW4gRnJhbmNpc2NvMR8wHQYDVQQDExZwZWVyMC5vcmcxLmV4YW1wbGUuY29tMFkw\nEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEzS9k2gCKHcat8Wj4T2nB1uyC8R2zg3um\nxdTL7nmgFWp0uyCCbQQxD/VS+8R/3DNvEFkvzhcjc9NU/nRqMirpLqNNMEswDgYD\nVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwKwYDVR0jBCQwIoAgDnKSJOiz8xeE\nyKk8W4729MHJHZ5uV3xFwzFjYJ/kABEwCgYIKoZIzj0EAwIDRwAwRAIgHBdxbHUG\nrFUzKPX9UmmN3SwigWcRUREUy/GTb3hDIAsCIEF1BxTqv8ilQYE8ql0wJL4mTber\nHE6DFYvvBCUnicUh\n-----END -----\n&quot; signature:&quot;0E\002!\000\234s\024\311\257\272\315\375:\355z\260}\336X\214\034\372MP\374L`\251\0034\217\327g\274\300\263\002 \rD]\340\332\343\032+\312\364vox\277JV\331\026j\031\303\251g\370\276\351\234\253\322\006\311\326&quot; &gt; 
2017-08-29 19:14:03.419 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 00a Chaincode invoke successful. result: status:200 
2017-08-29 19:14:03.419 UTC [main] main -&gt; INFO 00b Exiting.....

Total execution time : 122 secs ...

root@ubuntu:~/basic-network#</code></pre>
<pre><code class="shell">CONTAINER ID        IMAGE                                     COMMAND                  CREATED             STATUS              PORTS                                            NAMES
3b2978bd8bb9        dev-peer0.org1.example.com-fabcar-1.0     &quot;chaincode -peer.a...&quot;   15 hours ago        Up 15 hours                                                          dev-peer0.org1.example.com-fabcar-1.0
e58f60336983        hyperledger/fabric-tools:x86_64-1.0.0     &quot;/bin/bash&quot;              15 hours ago        Up 15 hours                                                          cli
efecad2b6d36        hyperledger/fabric-peer:x86_64-1.0.0      &quot;peer node start&quot;        15 hours ago        Up 15 hours         0.0.0.0:7051-&gt;7051/tcp, 0.0.0.0:7053-&gt;7053/tcp   peer0.org1.example.com
8bf3d70e5f42        hyperledger/fabric-ca:x86_64-1.0.0        &quot;sh -c &#39;fabric-ca-...&quot;   15 hours ago        Up 15 hours         0.0.0.0:7054-&gt;7054/tcp                           ca.example.com
dd58d8c032e3        hyperledger/fabric-orderer:x86_64-1.0.0   &quot;orderer&quot;                15 hours ago        Up 15 hours         0.0.0.0:7050-&gt;7050/tcp                           orderer.example.com
8077c0b69096        hyperledger/fabric-couchdb:x86_64-1.0.0   &quot;tini -- /docker-e...&quot;   15 hours ago        Up 15 hours         4369/tcp, 9100/tcp, 0.0.0.0:5984-&gt;5984/tcp       couchdb</code></pre>
<h3 id="执行区块链交易"><a href="#执行区块链交易" class="headerlink" title="执行区块链交易"></a>执行区块链交易</h3><p>通过以上过程完成构建一个Blockchain Network，接下来我们将通过Node.Js编写的程序Application执行交易。</p>
<p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/fabcar.png" alt="fabcar"></p>
<p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/fabcar2.png" alt="fabcar2"></p>
<p>安装Fabric Node SDK</p>
<pre><code class="shell">root@ubuntu:~/fabcar# npm install</code></pre>
<p>编写查询程序query.js</p>
<pre><code class="javascript">&#39;use strict&#39;;
/*
*
* SPDX-License-Identifier: Apache-2.0
*/
/*
 * Hyperledger Fabric Sample Query Program
 */

var hfc = require(&#39;fabric-client&#39;);
var path = require(&#39;path&#39;);

var options = {
    wallet_path: path.join(__dirname, &#39;./creds&#39;),
    user_id: &#39;PeerAdmin&#39;,
    channel_id: &#39;mychannel&#39;,
    chaincode_id: &#39;fabcar&#39;,
    network_url: &#39;grpc://localhost:7051&#39;,
};

var channel = {};
var client = null;

Promise.resolve().then(() =&gt; {
    console.log(&quot;Create a client and set the wallet location&quot;);
    client = new hfc();
    return hfc.newDefaultKeyValueStore({ path: options.wallet_path });
}).then((wallet) =&gt; {
    console.log(&quot;Set wallet path, and associate user &quot;, options.user_id, &quot; with application&quot;);
    client.setStateStore(wallet);
    return client.getUserContext(options.user_id, true);
}).then((user) =&gt; {
    console.log(&quot;Check user is enrolled, and set a query URL in the network&quot;);
    if (user === undefined || user.isEnrolled() === false) {
        console.error(&quot;User not defined, or not enrolled - error&quot;);
    }
    channel = client.newChannel(options.channel_id);
    channel.addPeer(client.newPeer(options.network_url));
    return;
}).then(() =&gt; {
    console.log(&quot;Make query&quot;);
    var transaction_id = client.newTransactionID();
    console.log(&quot;Assigning transaction_id: &quot;, transaction_id._transaction_id);

    // queryCar - requires 1 argument, ex: args: [&#39;CAR4&#39;],
    // queryAllCars - requires no arguments , ex: args: [&#39;&#39;],
    const request = {
        chaincodeId: options.chaincode_id,
        txId: transaction_id,
        fcn: &#39;queryAllCars&#39;,
        args: [&#39;&#39;]
    };
    return channel.queryByChaincode(request);
}).then((query_responses) =&gt; {
    console.log(&quot;returned from query&quot;);
    if (!query_responses.length) {
        console.log(&quot;No payloads were returned from query&quot;);
    } else {
        console.log(&quot;Query result count = &quot;, query_responses.length)
    }
    if (query_responses[0] instanceof Error) {
        console.error(&quot;error from query = &quot;, query_responses[0]);
    }
    console.log(&quot;Response is &quot;, query_responses[0].toString());
}).catch((err) =&gt; {
    console.error(&quot;Caught Error&quot;, err);
});</code></pre>
<p>执行query.js</p>
<pre><code>root@ubuntu:~/fabcar# node query.js
Create a client and set the wallet location
Set wallet path, and associate user  PeerAdmin  with application
Check user is enrolled, and set a query URL in the network
Make query
Assigning transaction_id:  aa4384c6e00c25965bfd7690468003ae5c602e3d70df5eccca6dbf9657cce077
returned from query
Query result count =  1
Response is  [{&quot;Key&quot;:&quot;CAR0&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;blue&quot;,&quot;make&quot;:&quot;Toyota&quot;,&quot;model&quot;:&quot;Prius&quot;,&quot;owner&quot;:&quot;Tomoko&quot;}},{&quot;Key&quot;:&quot;CAR1&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;red&quot;,&quot;make&quot;:&quot;Ford&quot;,&quot;model&quot;:&quot;Mustang&quot;,&quot;owner&quot;:&quot;Brad&quot;}},{&quot;Key&quot;:&quot;CAR2&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;green&quot;,&quot;make&quot;:&quot;Hyundai&quot;,&quot;model&quot;:&quot;Tucson&quot;,&quot;owner&quot;:&quot;Jin Soo&quot;}},{&quot;Key&quot;:&quot;CAR3&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;yellow&quot;,&quot;make&quot;:&quot;Volkswagen&quot;,&quot;model&quot;:&quot;Passat&quot;,&quot;owner&quot;:&quot;Max&quot;}},{&quot;Key&quot;:&quot;CAR4&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;black&quot;,&quot;make&quot;:&quot;Tesla&quot;,&quot;model&quot;:&quot;S&quot;,&quot;owner&quot;:&quot;Adriana&quot;}},{&quot;Key&quot;:&quot;CAR5&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;purple&quot;,&quot;make&quot;:&quot;Peugeot&quot;,&quot;model&quot;:&quot;205&quot;,&quot;owner&quot;:&quot;Michel&quot;}},{&quot;Key&quot;:&quot;CAR6&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;white&quot;,&quot;make&quot;:&quot;Chery&quot;,&quot;model&quot;:&quot;S22L&quot;,&quot;owner&quot;:&quot;Aarav&quot;}},{&quot;Key&quot;:&quot;CAR7&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;violet&quot;,&quot;make&quot;:&quot;Fiat&quot;,&quot;model&quot;:&quot;Punto&quot;,&quot;owner&quot;:&quot;Pari&quot;}},{&quot;Key&quot;:&quot;CAR8&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;indigo&quot;,&quot;make&quot;:&quot;Tata&quot;,&quot;model&quot;:&quot;Nano&quot;,&quot;owner&quot;:&quot;Valeria&quot;}},{&quot;Key&quot;:&quot;CAR9&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;brown&quot;,&quot;make&quot;:&quot;Holden&quot;,&quot;model&quot;:&quot;Barina&quot;,&quot;owner&quot;:&quot;Shotaro&quot;}}]
root@ubuntu:~/fabcar# 
</code></pre><p>改变车主， 把”Adriana”的”CAR4”, “Tesla”,”model”:”S” 的owner改为”Zheng rui”</p>
<p>changeowner.js</p>
<pre><code class="javascript">&#39;use strict&#39;;
/*
* Copyright IBM Corp All Rights Reserved
*
* SPDX-License-Identifier: Apache-2.0
*/
/*
 * Chaincode Invoke
 */

var hfc = require(&#39;fabric-client&#39;);
var path = require(&#39;path&#39;);
var util = require(&#39;util&#39;);

var options = {
    wallet_path: path.join(__dirname, &#39;./creds&#39;),
    user_id: &#39;PeerAdmin&#39;,
    channel_id: &#39;mychannel&#39;,
    chaincode_id: &#39;fabcar&#39;,
    peer_url: &#39;grpc://localhost:7051&#39;,
    event_url: &#39;grpc://localhost:7053&#39;,
    orderer_url: &#39;grpc://localhost:7050&#39;
};

var channel = {};
var client = null;
var targets = [];
var tx_id = null;
Promise.resolve().then(() =&gt; {
    console.log(&quot;Create a client and set the wallet location&quot;);
    client = new hfc();
    return hfc.newDefaultKeyValueStore({ path: options.wallet_path });
}).then((wallet) =&gt; {
    console.log(&quot;Set wallet path, and associate user &quot;, options.user_id, &quot; with application&quot;);
    client.setStateStore(wallet);
    return client.getUserContext(options.user_id, true);
}).then((user) =&gt; {
    console.log(&quot;Check user is enrolled, and set a query URL in the network&quot;);
    if (user === undefined || user.isEnrolled() === false) {
        console.error(&quot;User not defined, or not enrolled - error&quot;);
    }
    channel = client.newChannel(options.channel_id);
    var peerObj = client.newPeer(options.peer_url);
    channel.addPeer(peerObj);
    channel.addOrderer(client.newOrderer(options.orderer_url));
    targets.push(peerObj);
    return;
}).then(() =&gt; {
    tx_id = client.newTransactionID();
    console.log(&quot;Assigning transaction_id: &quot;, tx_id._transaction_id);
    // createCar - requires 5 args, ex: args: [&#39;CAR11&#39;, &#39;Honda&#39;, &#39;Accord&#39;, &#39;Black&#39;, &#39;Tom&#39;],
    // changeCarOwner - requires 2 args , ex: args: [&#39;CAR10&#39;, &#39;Barry&#39;],
    // send proposal to endorser
    var request = {
        targets: targets,
        chaincodeId: options.chaincode_id,
        fcn: &#39;changeCarOwner&#39;,
        args: [&#39;CAR4&#39;, &#39;Zheng rui&#39;],
        chainId: options.channel_id,
        txId: tx_id
    };
    return channel.sendTransactionProposal(request);
}).then((results) =&gt; {
    var proposalResponses = results[0];
    var proposal = results[1];
    var header = results[2];
    let isProposalGood = false;
    if (proposalResponses &amp;&amp; proposalResponses[0].response &amp;&amp;
        proposalResponses[0].response.status === 200) {
        isProposalGood = true;
        console.log(&#39;transaction proposal was good&#39;);
    } else {
        console.error(&#39;transaction proposal was bad&#39;);
    }
    if (isProposalGood) {
        console.log(util.format(
            &#39;Successfully sent Proposal and received ProposalResponse: Status - %s, message - &quot;%s&quot;, metadata - &quot;%s&quot;, endorsement signature: %s&#39;,
            proposalResponses[0].response.status, proposalResponses[0].response.message,
            proposalResponses[0].response.payload, proposalResponses[0].endorsement.signature));
        var request = {
            proposalResponses: proposalResponses,
            proposal: proposal,
            header: header
        };
        // set the transaction listener and set a timeout of 30sec
        // if the transaction did not get committed within the timeout period,
        // fail the test
        var transactionID = tx_id.getTransactionID();
        var eventPromises = [];
        let eh = client.newEventHub();
        eh.setPeerAddr(options.event_url);
        eh.connect();

        let txPromise = new Promise((resolve, reject) =&gt; {
            let handle = setTimeout(() =&gt; {
                eh.disconnect();
                reject();
            }, 30000);

            eh.registerTxEvent(transactionID, (tx, code) =&gt; {
                clearTimeout(handle);
                eh.unregisterTxEvent(transactionID);
                eh.disconnect();

                if (code !== &#39;VALID&#39;) {
                    console.error(
                        &#39;The transaction was invalid, code = &#39; + code);
                    reject();
                } else {
                    console.log(
                        &#39;The transaction has been committed on peer &#39; +
                        eh._ep._endpoint.addr);
                    resolve();
                }
            });
        });
        eventPromises.push(txPromise);
        var sendPromise = channel.sendTransaction(request);
        return Promise.all([sendPromise].concat(eventPromises)).then((results) =&gt; {
            console.log(&#39; event promise all complete and testing complete&#39;);
            return results[0]; // the first returned value is from the &#39;sendPromise&#39; which is from the &#39;sendTransaction()&#39; call
        }).catch((err) =&gt; {
            console.error(
                &#39;Failed to send transaction and get notifications within the timeout period.&#39;
            );
            return &#39;Failed to send transaction and get notifications within the timeout period.&#39;;
        });
    } else {
        console.error(
            &#39;Failed to send Proposal or receive valid response. Response null or status is not 200. exiting...&#39;
        );
        return &#39;Failed to send Proposal or receive valid response. Response null or status is not 200. exiting...&#39;;
    }
}, (err) =&gt; {
    console.error(&#39;Failed to send proposal due to error: &#39; + err.stack ? err.stack :
        err);
    return &#39;Failed to send proposal due to error: &#39; + err.stack ? err.stack :
        err;
}).then((response) =&gt; {
    if (response.status === &#39;SUCCESS&#39;) {
        console.log(&#39;Successfully sent transaction to the orderer.&#39;);
        return tx_id.getTransactionID();
    } else {
        console.error(&#39;Failed to order the transaction. Error code: &#39; + response.status);
        return &#39;Failed to order the transaction. Error code: &#39; + response.status;
    }
}, (err) =&gt; {
    console.error(&#39;Failed to send transaction due to error: &#39; + err.stack ? err
        .stack : err);
    return &#39;Failed to send transaction due to error: &#39; + err.stack ? err.stack :
        err;
});
</code></pre>
<p>执行改车主程序</p>
<pre><code class="shell">root@ubuntu:~/fabcar# node changeowner.js
Create a client and set the wallet location
Set wallet path, and associate user  PeerAdmin  with application
Check user is enrolled, and set a query URL in the network
Assigning transaction_id:  c5263d9f94a0876ea80fcf4d3eb5ff914525afdcf521e7a21a64526b88bb023e
transaction proposal was good
Successfully sent Proposal and received ProposalResponse: Status - 200, message - &quot;OK&quot;, metadata - &quot;&quot;, endorsement signature: 0D 5�&quot;���b�Dc��Hb7��-n�Hx[�� 5�{h6���g���v�� 7���DZ�6LA��
info: [EventHub.js]: _connect - options {}
The transaction has been committed on peer localhost:7053
 event promise all complete and testing complete
Successfully sent transaction to the orderer.
root@ubuntu:~/fabcar# </code></pre>
<p>再查询一下</p>
<pre><code class="shell">root@ubuntu:~/fabcar# node query.js
Create a client and set the wallet location
Set wallet path, and associate user  PeerAdmin  with application
Check user is enrolled, and set a query URL in the network
Make query
Assigning transaction_id:  757d64fa926de8ed57c944e3e92b470d76cc37a21b9cea1cf299e7177daf7f77
returned from query
Query result count =  1
Response is  [{&quot;Key&quot;:&quot;CAR0&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;blue&quot;,&quot;make&quot;:&quot;Toyota&quot;,&quot;model&quot;:&quot;Prius&quot;,&quot;owner&quot;:&quot;Tomoko&quot;}},{&quot;Key&quot;:&quot;CAR1&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;red&quot;,&quot;make&quot;:&quot;Ford&quot;,&quot;model&quot;:&quot;Mustang&quot;,&quot;owner&quot;:&quot;Brad&quot;}},{&quot;Key&quot;:&quot;CAR2&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;green&quot;,&quot;make&quot;:&quot;Hyundai&quot;,&quot;model&quot;:&quot;Tucson&quot;,&quot;owner&quot;:&quot;Jin Soo&quot;}},{&quot;Key&quot;:&quot;CAR3&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;yellow&quot;,&quot;make&quot;:&quot;Volkswagen&quot;,&quot;model&quot;:&quot;Passat&quot;,&quot;owner&quot;:&quot;Max&quot;}},{&quot;Key&quot;:&quot;CAR4&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;black&quot;,&quot;make&quot;:&quot;Tesla&quot;,&quot;model&quot;:&quot;S&quot;,&quot;owner&quot;:&quot;Zheng rui&quot;}},{&quot;Key&quot;:&quot;CAR5&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;purple&quot;,&quot;make&quot;:&quot;Peugeot&quot;,&quot;model&quot;:&quot;205&quot;,&quot;owner&quot;:&quot;Michel&quot;}},{&quot;Key&quot;:&quot;CAR6&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;white&quot;,&quot;make&quot;:&quot;Chery&quot;,&quot;model&quot;:&quot;S22L&quot;,&quot;owner&quot;:&quot;Aarav&quot;}},{&quot;Key&quot;:&quot;CAR7&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;violet&quot;,&quot;make&quot;:&quot;Fiat&quot;,&quot;model&quot;:&quot;Punto&quot;,&quot;owner&quot;:&quot;Pari&quot;}},{&quot;Key&quot;:&quot;CAR8&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;indigo&quot;,&quot;make&quot;:&quot;Tata&quot;,&quot;model&quot;:&quot;Nano&quot;,&quot;owner&quot;:&quot;Valeria&quot;}},{&quot;Key&quot;:&quot;CAR9&quot;, &quot;Record&quot;:{&quot;colour&quot;:&quot;brown&quot;,&quot;make&quot;:&quot;Holden&quot;,&quot;model&quot;:&quot;Barina&quot;,&quot;owner&quot;:&quot;Shotaro&quot;}}]
</code></pre>
<blockquote>
<p>{“Key”:”CAR4”, “Record”:{“colour”:”black”,”make”:”Tesla”,”model”:”S”,”owner”:”Zheng rui”}}</p>
</blockquote>
<p>车主变为“Zheng rui”， 是不是很简单。</p>
<h3 id="为什么要用区块链？"><a href="#为什么要用区块链？" class="headerlink" title="为什么要用区块链？"></a>为什么要用区块链？</h3><blockquote>
<p>引一下Hyperledger的官方说法: 区块链技术将带来的广泛、根本的革命，自互联网以来，没有一个技术能与其潜力相比。区块链是一个端对端的分布式账薄，叠加了共识机制，加上“智能合约”系统和其他辅助技术。所有这些共同作用，可以用来构建新一代的交易应用，在核心上建立信任、责任和透明度，同时精简业务流程和法律约束。</p>
<p>我们可以把它想象为一个交易市场的操作系统、数据共享网络、微货币、以及一个去中心化的数字社区。它有极大降低现实世界中完成交易的成本和复杂性的潜能。</p>
<p>只有一个开源、协作的软件开发方法才能够确保所需要的透明度、长期性、互操作性和支持，将区块链技术带进主流商业应用。超级账本的宗旨是——创建从事区块链框架和平台搭建的软件开发人员社区。</p>
</blockquote>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://blog.eeic.com.cn" rel="external nofollow noreferrer">robin zheng</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://blog.eeic.com.cn/2017/05/29/%E5%8C%BA%E5%9D%97%E9%93%BE/2017-05-29-Hyperledger-Fabric-Car/">https://blog.eeic.com.cn/2017/05/29/%E5%8C%BA%E5%9D%97%E9%93%BE/2017-05-29-Hyperledger-Fabric-Car/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://blog.eeic.com.cn" target="_blank">robin zheng</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Hyperledger/">
                                    <span class="chip bg-color">Hyperledger</span>
                                </a>
                            
                                <a href="/tags/Blockchain/">
                                    <span class="chip bg-color">Blockchain</span>
                                </a>
                            
                                <a href="/tags/Supplychain/">
                                    <span class="chip bg-color">Supplychain</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2017/06/25/%E5%A4%A7%E6%95%B0%E6%8D%AE/2017-06-25-hadoop-hbase-docker/">
                    <div class="card-image">
                        
                        <img src="https://hbase.apache.org/images/hbase_logo_with_orca_large.png" class="responsive-img" alt="基于Docker单机快速部署Hbase和Hadoop集群">
                        
                        <span class="card-title">基于Docker单机快速部署Hbase和Hadoop集群</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            基于Docker单机快速部署Hbase和Hadoop集群
采用krejcmat/hadoop-hbase-docker项目
Docker 需要先安装好

######相关产品版本



system
version



HBase
1.2
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2017-06-25
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="post-category">
                                    大数据
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/">
                        <span class="chip bg-color">大数据</span>
                    </a>
                    
                    <a href="/tags/Hbase/">
                        <span class="chip bg-color">Hbase</span>
                    </a>
                    
                    <a href="/tags/Hadoop/">
                        <span class="chip bg-color">Hadoop</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2017/05/29/%E5%8C%BA%E5%9D%97%E9%93%BE/2017-08-29-HYPERLEDGER-SAWTOOTH/">
                    <div class="card-image">
                        
                        <img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/fishflow1.PNG" class="responsive-img" alt="Hyperledger 在供应链可视化案例">
                        
                        <span class="card-title">Hyperledger 在供应链可视化案例</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            海鲜供应跟踪只是众多用例中的一种对海产品供应链进行革命性的改革，仅仅是Hyperledger能带来真正的世界效益的众多例子中的一个例子。区块链平台使用户能够为他们的供应链设计定制的解决方案。区块链提供了一种独特的能力，让企业可以与客户分享选
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2017-05-29
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" class="post-category">
                                    区块链
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Hyperledger/">
                        <span class="chip bg-color">Hyperledger</span>
                    </a>
                    
                    <a href="/tags/Blockchain/">
                        <span class="chip bg-color">Blockchain</span>
                    </a>
                    
                    <a href="/tags/Supply-chain/">
                        <span class="chip bg-color">Supply chain</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://blog.eeic.com.cn" target="_blank">Robin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1181062873" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
